function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}import e,{useState as t}from"react";import o from"react-dom/client";import{Icon as i}from"@mdi/react";import{mdiChevronDown as r,mdiChevronRight as l,mdiClose as n}from"@mdi/js";import a from"react-virtual-dom";import s from"aio-storage";import"./index.css";import m from"jquery";import g from"aio-input";import{jsx as u}from"react/jsx-runtime";export default class p{constructor(e){_defineProperty(this,"update",e=>{this.logStorage.save({name:"logs",value:e}),this.logs=e}),_defineProperty(this,"add",(e,t,o="log"+Math.round(1e5*Math.random()))=>{let i=[...o?this.logs.filter(e=>e.id!==o):this.logs,{key:e,value:t,id:o}];this.update(i)}),_defineProperty(this,"remove",e=>{this.logs.length&&this.logs[e]&&this.update(this.logs.filter((t,o)=>o!==e))}),_defineProperty(this,"openPopup",()=>{m("#aio-log-container").length||m("body").append('<div id="aio-log-container"></div>');let e=o.createRoot(document.getElementById("aio-log-container"));e.render(u(a,{layout:{className:"fullscreen",style:{direction:"ltr"},column:[{size:48,align:"v",style:{background:"#fff"},row:[{size:12},{flex:1,align:"v",html:"LOGGER"},{html:u(i,{path:n,size:1}),align:"vh",size:48,onClick:()=>this.removePopup()}]},{flex:1,html:this.render()}]}}))}),_defineProperty(this,"removePopup",()=>{m("#aio-log-container").remove()}),_defineProperty(this,"render",()=>u(LogsComponent,{logs:this.logs,onRemove:this.remove.bind(this)})),e||alert("aio-log error => missing id properties to create instance"),this.logStorage=s(e),this.logs=this.logStorage.load({name:"logs",def:[]})}};function LogsComponent(e){let[o,s]=t(e.logs),[m,p]=t("logs"),[c,f]=t(!1);return u(a,{layout:{className:"aio-log",column:[{size:36,html:u(g,{type:"tabs",options:[{text:"logs",value:"logs"}],onChange:e=>p(e),value:m})},{flex:1,className:"aio-log-items",column:o.map((t,a)=>{var m,g,p,d,h;return m=t,g=a,{className:"aio-log-item",column:[(p=m,d=g,{size:36,row:[function e({id:t}){return{size:24,align:"vh",html:u(i,{path:c===t?r:l,size:1})}}(p),function e({key:t,id:o}){return{html:t,flex:1,align:"v",className:"aio-log-item-title",onClick:()=>f(o!==c&&o)}}(p),(h=d,{html:u(i,{path:n,size:.8}),align:"vh",size:24,onClick(){var t;return t=h,void(s(o.filter((e,o)=>o!==t)),e.onRemove(t))}})],className:"aio-log-item-header"}),function e({value:t,id:o}){var i;return c===o&&{className:"aio-log-item-body",html:"object"==typeof(i=t)?u("pre",{children:JSON.stringify(i,null,3)}):i,align:"v"}}(m)]}})}]}})}